{% extends "base.html" %}

{% block content %}
<!-- Page Header -->
<div class="text-center mb-10">
    <h1 class="text-3xl font-bold text-primary mb-2">ðŸ”Œ API Tester</h1>
    <p class="text-secondary text-lg">Send HTTP requests and view JSON responses â€” test endpoints easily.</p>
</div>

<!-- API Tester Form -->
<form method="post" action="/api-tester" class="max-w-3xl mx-auto bg-white p-6 rounded-2xl shadow-md space-y-6 mb-10">
    <!-- URL -->
    <div>
        <label for="url" class="block text-sm font-medium text-gray-700 mb-1">API URL:</label>
        <input
            type="text"
            id="url"
            name="url"
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500"
            placeholder="https://api.example.com/data"
            required
        >
    </div>

    <!-- Method -->
    <div>
        <label for="method" class="block text-sm font-medium text-gray-700 mb-1">HTTP Method:</label>
        <select
            name="method"
            id="method"
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500"
        >
            <option value="GET">GET</option>
            <option value="POST">POST</option>
        </select>
    </div>

    <!-- Headers -->
    <div>
        <label for="headers" class="block text-sm font-medium text-gray-700 mb-1">Headers (JSON):</label>
        <textarea
            name="headers"
            id="headers"
            rows="3"
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500"
            placeholder='{"Authorization": "Bearer TOKEN"}'>{}</textarea>
    </div>

    <!-- Body -->
    <div>
        <label for="body" class="block text-sm font-medium text-gray-700 mb-1">Request Body (JSON):</label>
        <textarea
            name="body"
            id="body"
            rows="4"
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500"
            placeholder='{"key": "value"}'>{}</textarea>
    </div>

    <!-- Submit -->
    <button
        type="submit"
        class="w-full bg-orange-500 text-white py-3 rounded-lg font-medium hover:bg-orange-600 transition"
    >
        Send Request
    </button>
</form>

<!-- Response URL -->
{% if url %}
    <div class="max-w-3xl mx-auto bg-white p-6 rounded-2xl shadow-md mb-6">
        <h5 class="text-md font-semibold text-primary mb-2">ðŸ”— Requested URL:</h5>
        <pre class="bg-gray-100 text-sm p-4 rounded-md border border-gray-200">{{ url }}</pre>
    </div>
{% endif %}

<!-- Response Body -->
{% if result %}
    <div class="max-w-3xl mx-auto bg-white p-6 rounded-2xl shadow-md">
        <h5 class="text-md font-semibold text-primary mb-2">ðŸ“¦ Response:</h5>
        <pre class="bg-gray-100 text-sm p-4 rounded-md border border-gray-200"><code>{{ result | tojson(indent=2) }}</code></pre>
    </div>
{% endif %}
{% endblock %}
